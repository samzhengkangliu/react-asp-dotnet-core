{"ast":null,"code":"var _jsxFileName = \"/Users/xz214ue/Documents/Tutorial/react-asp-dotnet-core/Reactivities-frontend/src/app/layout/App.tsx\";\nimport React, { useEffect, useState, Fragment } from \"react\";\nimport { Container } from \"semantic-ui-react\"; // Interface\n\n// Component\nimport NavBar from \"../../features/nav/NavBar\";\nimport ActivityDashboard from \"../../features/activities/dashboard/ActivityDashboard\";\nimport LoadingComponent from \"./LoadingComponent\"; // API\n\nimport agent from \"../api/agent\";\n\nconst App = () => {\n  const [activities, setActivities] = useState([]);\n  const [selectedActivity, setSelectedActivity] = useState(null);\n  const [editMode, setEditMode] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [target, setTarget] = useState(\"\");\n\n  const handleSelectActivity = id => {\n    setSelectedActivity(activities.filter(activity => activity.id === id)[0]);\n    setEditMode(false);\n  };\n\n  const handleOpenCreateForm = () => {\n    setSelectedActivity(null);\n    setEditMode(true);\n  };\n\n  const handleCreateActivity = activity => {\n    setSubmitting(true);\n    agent.Activities.create(activity).then(() => {\n      setActivities([...activities, activity]);\n      setSelectedActivity(activity);\n      setEditMode(false);\n    }).then(() => setSubmitting(false));\n  };\n\n  const handleEditActivity = activity => {\n    setSubmitting(true);\n    agent.Activities.update(activity).then(() => {\n      setActivities([...activities.filter(a => a.id !== activity.id), activity]);\n      setSelectedActivity(activity);\n      setEditMode(false);\n    }).then(() => setSubmitting(false));\n  };\n\n  const handleDeleteActivity = (event, id) => {\n    setSubmitting(true);\n    setTarget(event.currentTarget.name);\n    agent.Activities.delete(id).then(() => {\n      setActivities([...activities.filter(activity => activity.id !== id)]);\n    }).then(() => setSubmitting(false));\n  };\n\n  useEffect(() => {\n    agent.Activities.list().then(response => {\n      let activities = [];\n      response.forEach(activity => {\n        activity.date = activity.date.split(\".\")[0];\n        activities.push(activity);\n      });\n      setActivities(activities);\n    }).then(() => setLoading(false));\n  }, []); // ensure useEffect only runs one time only every time we reach this page\n\n  if (loading) return /*#__PURE__*/React.createElement(LoadingComponent, {\n    content: \"Loading activities\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 23\n    }\n  });\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    openCreateForm: handleOpenCreateForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    style: {\n      marginTop: \"7em\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ActivityDashboard, {\n    activities: activities,\n    selectedActivity: selectedActivity,\n    selectActivity: handleSelectActivity,\n    setSelectedActivity: setSelectedActivity,\n    editMode: editMode,\n    setEditMode: setEditMode,\n    createActivity: handleCreateActivity,\n    editActivity: handleEditActivity,\n    deleteActivity: handleDeleteActivity,\n    submitting: submitting,\n    target: target,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/xz214ue/Documents/Tutorial/react-asp-dotnet-core/Reactivities-frontend/src/app/layout/App.tsx"],"names":["React","useEffect","useState","Fragment","Container","NavBar","ActivityDashboard","LoadingComponent","agent","App","activities","setActivities","selectedActivity","setSelectedActivity","editMode","setEditMode","loading","setLoading","submitting","setSubmitting","target","setTarget","handleSelectActivity","id","filter","activity","handleOpenCreateForm","handleCreateActivity","Activities","create","then","handleEditActivity","update","a","handleDeleteActivity","event","currentTarget","name","delete","list","response","forEach","date","split","push","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment, SyntheticEvent } from \"react\";\nimport { Container } from \"semantic-ui-react\";\n\n// Interface\nimport { IActivity } from \"../models/activity\";\n\n// Component\nimport NavBar from \"../../features/nav/NavBar\";\nimport ActivityDashboard from \"../../features/activities/dashboard/ActivityDashboard\";\nimport LoadingComponent from \"./LoadingComponent\";\n\n// API\nimport agent from \"../api/agent\";\n\nconst App = () => {\n  const [activities, setActivities] = useState<IActivity[]>([]);\n  const [selectedActivity, setSelectedActivity] = useState<IActivity | null>(\n    null\n  );\n  const [editMode, setEditMode] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [target, setTarget] = useState(\"\");\n\n  const handleSelectActivity = (id: string) => {\n    setSelectedActivity(activities.filter((activity) => activity.id === id)[0]);\n    setEditMode(false);\n  };\n\n  const handleOpenCreateForm = () => {\n    setSelectedActivity(null);\n    setEditMode(true);\n  };\n\n  const handleCreateActivity = (activity: IActivity) => {\n    setSubmitting(true);\n    agent.Activities.create(activity)\n      .then(() => {\n        setActivities([...activities, activity]);\n        setSelectedActivity(activity);\n        setEditMode(false);\n      })\n      .then(() => setSubmitting(false));\n  };\n\n  const handleEditActivity = (activity: IActivity) => {\n    setSubmitting(true);\n    agent.Activities.update(activity)\n      .then(() => {\n        setActivities([\n          ...activities.filter((a) => a.id !== activity.id),\n          activity,\n        ]);\n        setSelectedActivity(activity);\n        setEditMode(false);\n      })\n      .then(() => setSubmitting(false));\n  };\n\n  const handleDeleteActivity = (\n    event: SyntheticEvent<HTMLButtonElement>,\n    id: string\n  ) => {\n    setSubmitting(true);\n    setTarget(event.currentTarget.name);\n    agent.Activities.delete(id)\n      .then(() => {\n        setActivities([...activities.filter((activity) => activity.id !== id)]);\n      })\n      .then(() => setSubmitting(false));\n  };\n\n  useEffect(() => {\n    agent.Activities.list()\n      .then((response) => {\n        let activities: IActivity[] = [];\n        response.forEach((activity) => {\n          activity.date = activity.date.split(\".\")[0];\n          activities.push(activity);\n        });\n        setActivities(activities);\n      })\n      .then(() => setLoading(false));\n  }, []); // ensure useEffect only runs one time only every time we reach this page\n\n  if (loading) return <LoadingComponent content=\"Loading activities\" />;\n\n  return (\n    <Fragment>\n      <NavBar openCreateForm={handleOpenCreateForm} />\n      <Container style={{ marginTop: \"7em\" }}>\n        <ActivityDashboard\n          activities={activities}\n          selectedActivity={selectedActivity}\n          selectActivity={handleSelectActivity}\n          setSelectedActivity={setSelectedActivity}\n          editMode={editMode}\n          setEditMode={setEditMode}\n          createActivity={handleCreateActivity}\n          editActivity={handleEditActivity}\n          deleteActivity={handleDeleteActivity}\n          submitting={submitting}\n          target={target}\n        />\n      </Container>\n    </Fragment>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}