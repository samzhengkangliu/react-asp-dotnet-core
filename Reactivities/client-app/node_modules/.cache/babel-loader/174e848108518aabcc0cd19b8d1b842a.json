{"ast":null,"code":"import axios from \"axios\";\nimport { history } from \"../..\";\nimport { toast } from \"react-toastify\";\naxios.defaults.baseURL = \"http://localhost:5000/api\";\naxios.interceptors.response.use(undefined, error => {\n  if (error.message === \"Network Error\" && !error.response) {\n    toast.error(\"Network error - make sure API is running!\");\n  }\n\n  const {\n    status,\n    data,\n    config\n  } = error.response;\n\n  if (status === 404) {\n    history.push(\"/notfound\");\n  }\n\n  if (status === 400 && config.method === \"get\" && data.errors.hasOwnProperty(\"id\")) {\n    history.push(\"/notfound\");\n  }\n\n  if (status === 500) {\n    toast.error(\"Server error - check the terminal for more info!\");\n  }\n});\n\nconst responseBody = response => response.data; // Add delay and carrying\n// carrying is a process where we can transform a function with multiple arguments into a sequence of nesting functions\n\n\nconst sleep = ms => response => new Promise(resolve => setTimeout(() => resolve(response), ms));\n\nconst requests = {\n  get: url => axios.get(url).then(sleep(1000)).then(responseBody),\n  post: (url, body) => axios.post(url, body).then(sleep(1000)).then(responseBody),\n  put: (url, body) => axios.put(url, body).then(sleep(1000)).then(responseBody),\n  delete: url => axios.delete(url).then(sleep(1000)).then(responseBody)\n};\nconst Activities = {\n  list: () => requests.get(\"/activities\"),\n  details: id => requests.get(`/activities/${id}`),\n  create: activity => requests.post(\"/activities\", activity),\n  update: activity => requests.put(`/activities/${activity.id}`, activity),\n  delete: id => requests.delete(`/activities/${id}`)\n};\nexport default {\n  Activities\n};","map":{"version":3,"sources":["/Users/xz214ue/Documents/Tutorial/react-asp-dotnet-core/Reactivities-frontend/src/app/api/agent.ts"],"names":["axios","history","toast","defaults","baseURL","interceptors","response","use","undefined","error","message","status","data","config","push","method","errors","hasOwnProperty","responseBody","sleep","ms","Promise","resolve","setTimeout","requests","get","url","then","post","body","put","delete","Activities","list","details","id","create","activity","update"],"mappings":"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","sourcesContent":["import axios, { AxiosResponse } from \"axios\";\nimport { IActivity } from \"../models/activity\";\nimport { history } from \"../..\";\nimport { toast } from \"react-toastify\";\n\naxios.defaults.baseURL = \"http://localhost:5000/api\";\n\naxios.interceptors.response.use(undefined, (error) => {\n  if (error.message === \"Network Error\" && !error.response) {\n    toast.error(\"Network error - make sure API is running!\");\n  }\n  const { status, data, config } = error.response;\n  if (status === 404) {\n    history.push(\"/notfound\");\n  }\n  if (\n    status === 400 &&\n    config.method === \"get\" &&\n    data.errors.hasOwnProperty(\"id\")\n  ) {\n    history.push(\"/notfound\");\n  }\n  if (status === 500) {\n    toast.error(\"Server error - check the terminal for more info!\");\n  }\n});\n\nconst responseBody = (response: AxiosResponse) => response.data;\n\n// Add delay and carrying\n// carrying is a process where we can transform a function with multiple arguments into a sequence of nesting functions\nconst sleep = (ms: number) => (response: AxiosResponse) =>\n  new Promise<AxiosResponse>((resolve) =>\n    setTimeout(() => resolve(response), ms)\n  );\n\nconst requests = {\n  get: (url: string) => axios.get(url).then(sleep(1000)).then(responseBody),\n  post: (url: string, body: {}) =>\n    axios.post(url, body).then(sleep(1000)).then(responseBody),\n  put: (url: string, body: {}) =>\n    axios.put(url, body).then(sleep(1000)).then(responseBody),\n  delete: (url: string) =>\n    axios.delete(url).then(sleep(1000)).then(responseBody),\n};\n\nconst Activities = {\n  list: (): Promise<IActivity[]> => requests.get(\"/activities\"),\n  details: (id: string) => requests.get(`/activities/${id}`),\n  create: (activity: IActivity) => requests.post(\"/activities\", activity),\n  update: (activity: IActivity) =>\n    requests.put(`/activities/${activity.id}`, activity),\n  delete: (id: string) => requests.delete(`/activities/${id}`),\n};\n\nexport default {\n  Activities,\n};\n"]},"metadata":{},"sourceType":"module"}